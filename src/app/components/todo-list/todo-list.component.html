
<div id="full-cover-background" class="flex flex-col bg-gray-100">

  <!-- Bloc Tâches -->
  <div id="centered-block" class="bg-white p-6 rounded-xl shadow-md w-150 m-auto mt-30 mb-30">
    <form [formGroup]="formGroup" (ngSubmit)="onAddTodo()">
      <div id="todo-bar-saisie" class="flex gap-2 m-4">
        <mat-form-field appearance="outline" class="flex-1">
          <input matInput formControlName="title" placeholder="Nouvelle tâche">
        </mat-form-field>
        <button mat-mini-fab type="submit" class="self-end">
      <mat-icon>add</mat-icon>
    </button>
  </div>
</form>
        <!--<button mat-mini-fab type="submit" class="mt-2">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </form>-->

    <mat-list>
      @for (todo of todos; track todo.id) {
        <mat-list-item>
          <div class="flex items-center w-full gap-4">
            <mat-checkbox [checked]="todo.completed" (change)="onCheckChange($event, todo)"></mat-checkbox>
            <span [routerLink]="['/todo-detail', todo.id]" class="flex-1 cursor-pointer">{{ todo.title }}</span>

          
            <button mat-icon-button (click)="onDeleteTodo(todo.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>

           <mat-chip-listbox>
          @for (id of todo.memberIds; track id) {
            <mat-chip>{{ getUserNameById(id) }}</mat-chip>
          }
           </mat-chip-listbox>

        </mat-list-item>
      }
    </mat-list>
  </div>

  <!-- Bloc Projets -->
  <div id="centered-block" class="bg-white p-6 rounded-xl shadow-md w-150 m-auto mb-30">
    <!-- PAS de formGroup ici -->
    <div class="flex gap-2 m-4">
      <mat-form-field appearance="outline" class="flex-1">
        <input matInput [(ngModel)]="newProjectName" name="projectName" placeholder="Nouveau projet">
      </mat-form-field>
      <button mat-mini-fab (click)="onAddProject()" class="mt-2">
        <mat-icon>add</mat-icon>
      </button>
    </div>

    <mat-list>
      @for (projet of projets; track projet.id) {
        <mat-list-item>
          <div class="flex items-center w-full gap-4">
            <span [routerLink]="['/projetdetails', projet.id]" class="flex-1 cursor-pointer">
              {{ projet.nom }}
            </span>
            <button mat-icon-button (click)="onDeleteProjet(projet.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-list-item>
      }
    </mat-list>
  </div>

</div>



